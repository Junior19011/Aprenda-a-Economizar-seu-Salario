<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Controle Financeiro Profissional</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1e3a8a;
            --secondary: #3b82f6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f3f4f6;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: var(--white);
            border-radius: 15px;
            padding: 20px 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--primary);
        }

        .logo h1 {
            font-size: 1.8rem;
            color: var(--primary);
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.5rem;
        }

        /* Navigation */
        nav {
            background: var(--white);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            background: var(--light);
            color: var(--dark);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-2px);
        }

        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
        }

        .card.income::before { background: var(--success); }
        .card.expense::before { background: var(--danger); }
        .card.balance::before { background: var(--secondary); }
        .card.savings::before { background: var(--warning); }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 0.9rem;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .card.income .card-icon { background: rgba(16, 185, 129, 0.1); color: var(--success); }
        .card.expense .card-icon { background: rgba(239, 68, 68, 0.1); color: var(--danger); }
        .card.balance .card-icon { background: rgba(59, 130, 246, 0.1); color: var(--secondary); }
        .card.savings .card-icon { background: rgba(245, 158, 11, 0.1); color: var(--warning); }

        .card-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .card-subtitle {
            font-size: 0.9rem;
            color: #6b7280;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Forms */
        .form-section {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-group input,
        .form-group select {
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #1e40af;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: var(--white);
        }

        .btn-danger {
            background: var(--danger);
            color: var(--white);
        }

        .btn-block {
            width: 100%;
            justify-content: center;
        }

        /* Categories */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .category-card {
            background: var(--white);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .category-card.selected {
            border: 3px solid var(--primary);
        }

        .category-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .category-name {
            font-weight: 600;
            color: var(--dark);
        }

        .category-amount {
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 5px;
        }

        /* Transactions */
        .transactions-list {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .transaction-details h4 {
            font-size: 1rem;
            color: var(--dark);
            margin-bottom: 3px;
        }

        .transaction-details p {
            font-size: 0.85rem;
            color: #6b7280;
        }

        .transaction-value {
            font-size: 1.1rem;
            font-weight: 700;
        }

        .transaction-value.income { color: var(--success); }
        .transaction-value.expense { color: var(--danger); }

        .transaction-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .edit-btn {
            background: #3b82f6;
            color: white;
        }

        .delete-btn {
            background: #ef4444;
            color: white;
        }

        /* Savings Goal */
        .savings-goal {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .goal-input {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .goal-input input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
        }

        .goal-progress {
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 20px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--secondary));
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #6b7280;
        }

        /* Calendar */
        .calendar-section {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            background: var(--light);
            color: var(--dark);
            cursor: pointer;
            transition: var(--transition);
        }

        .calendar-btn:hover {
            background: var(--primary);
            color: var(--white);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .month-card {
            background: var(--light);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .month-card:hover {
            transform: translateY(-3px);
        }

        .month-card.debt {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid var(--danger);
        }

        .month-card.debt::after {
            content: 'üí∏';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
        }

        .month-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .month-status {
            font-size: 0.9rem;
            color: #6b7280;
        }

        /* Charts */
        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .chart {
            height: 300px;
            position: relative;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            background: var(--success);
        }

        .notification.error {
            background: var(--danger);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .calendar-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-wallet"></i>
                <h1>Meu Controle Financeiro</h1>
            </div>
            <div class="user-info">
                <div>
                    <h3>Bem-vindo!</h3>
                    <p>Organize suas finan√ßas</p>
                </div>
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
            </div>
        </header>

        <nav>
            <button class="nav-btn active" data-tab="dashboard">
                <i class="fas fa-home"></i> Dashboard
            </button>
            <button class="nav-btn" data-tab="transactions">
                <i class="fas fa-exchange-alt"></i> Transa√ß√µes
            </button>
            <button class="nav-btn" data-tab="categories">
                <i class="fas fa-tags"></i> Categorias
            </button>
            <button class="nav-btn" data-tab="savings">
                <i class="fas fa-piggy-bank"></i> Metas
            </button>
            <button class="nav-btn" data-tab="calendar">
                <i class="fas fa-calendar-alt"></i> Calend√°rio
            </button>
        </nav>

        <!-- Dashboard Tab -->
        <div class="tab-content active" id="dashboard">
            <div class="dashboard">
                <div class="card income">
                    <div class="card-header">
                        <h3 class="card-title">Sal√°rio</h3>
                        <div class="card-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    <div class="card-value" id="salary-value">R$ 0,00</div>
                    <div class="card-subtitle">Receita mensal</div>
                </div>

                <div class="card expense">
                    <div class="card-header">
                        <h3 class="card-title">Despesas</h3>
                        <div class="card-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                    </div>
                    <div class="card-value" id="expenses-value">R$ 0,00</div>
                    <div class="card-subtitle">Total de gastos</div>
                </div>

                <div class="card balance">
                    <div class="card-header">
                        <h3 class="card-title">Saldo</h3>
                        <div class="card-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                    </div>
                    <div class="card-value" id="balance-value">R$ 0,00</div>
                    <div class="card-subtitle">Dispon√≠vel</div>
                </div>

                <div class="card savings">
                    <div class="card-header">
                        <h3 class="card-title">Meta de Economia</h3>
                        <div class="card-icon">
                            <i class="fas fa-target"></i>
                        </div>
                    </div>
                    <div class="card-value" id="savings-value">R$ 0,00</div>
                    <div class="card-subtitle">Mensal</div>
                </div>
            </div>

            <div class="charts-section">
                <div class="chart-container">
                    <h3 class="section-title">
                        <i class="fas fa-chart-line"></i> Evolu√ß√£o Financeira
                    </h3>
                    <div class="chart" id="evolution-chart">
                        <canvas id="evolutionCanvas"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="section-title">
                        <i class="fas fa-chart-pie"></i> Distribui√ß√£o de Gastos
                    </h3>
                    <div class="chart" id="distribution-chart">
                        <canvas id="distributionCanvas"></canvas>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-plus-circle"></i> Adicionar Transa√ß√£o R√°pida
                </h3>
                <form id="quick-transaction-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Descri√ß√£o</label>
                            <input type="text" id="quick-description" placeholder="Ex: Sal√°rio" required>
                        </div>
                        <div class="form-group">
                            <label>Valor (R$)</label>
                            <input type="number" id="quick-amount" step="0.01" min="0.01" placeholder="0,00" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo</label>
                            <select id="quick-type" required>
                                <option value="income">Receita</option>
                                <option value="expense">Despesa</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Categoria</label>
                            <select id="quick-category" required>
                                <option value="salario">Sal√°rio</option>
                                <option value="futebol">Futebol</option>
                                <option value="apostas">Apostas</option>
                                <option value="cabelo">Cabelo</option>
                                <option value="luz">Luz</option>
                                <option value="faculdade">Faculdade</option>
                                <option value="cartao">Cart√£o de Cr√©dito</option>
                                <option value="nautico">S√≥cio N√°utico</option>
                                <option value="namorada">Namorada</option>
                                <option value="passeio">Passeio</option>
                                <option value="habilitacao">Habilita√ß√£o</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-save"></i> Adicionar Transa√ß√£o
                    </button>
                </form>
            </div>
        </div>

        <!-- Transactions Tab -->
        <div class="tab-content" id="transactions">
            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-receipt"></i> Nova Transa√ß√£o
                </h3>
                <form id="transaction-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Descri√ß√£o</label>
                            <input type="text" id="description" placeholder="Descri√ß√£o detalhada" required>
                        </div>
                        <div class="form-group">
                            <label>Valor (R$)</label>
                            <input type="number" id="amount" step="0.01" min="0.01" placeholder="0,00" required>
                        </div>
                        <div class="form-group">
                            <label>Data</label>
                            <input type="date" id="date" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo</label>
                            <select id="type" required>
                                <option value="income">Receita</option>
                                <option value="expense">Despesa</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Categoria</label>
                            <select id="category" required>
                                <option value="salario">Sal√°rio</option>
                                <option value="futebol">Futebol</option>
                                <option value="apostas">Apostas</option>
                                <option value="cabelo">Cabelo</option>
                                <option value="luz">Luz</option>
                                <option value="faculdade">Faculdade</option>
                                <option value="cartao">Cart√£o de Cr√©dito</option>
                                <option value="nautico">S√≥cio N√°utico</option>
                                <option value="namorada">Namorada</option>
                                <option value="passeio">Passeio</option>
                                <option value="habilitacao">Habilita√ß√£o</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar Transa√ß√£o
                    </button>
                </form>
            </div>

            <div class="transactions-list">
                <h3 class="section-title">
                    <i class="fas fa-history"></i> Hist√≥rico de Transa√ß√µes
                </h3>
                <div id="transactions-container">
                    <div class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <p>Nenhuma transa√ß√£o registrada</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categories Tab -->
        <div class="tab-content" id="categories">
            <div class="form-section">
                <h3 class="section-title">
                    <i class="fas fa-tags"></i> Gerenciar Categorias
                </h3>
                <div class="categories-grid">
                    <div class="category-card" data-category="salario">
                        <div class="category-icon" style="color: #10b981;">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="category-name">Sal√°rio</div>
                        <div class="category-amount" id="cat-salario">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="futebol">
                        <div class="category-icon" style="color: #3b82f6;">
                            <i class="fas fa-futbol"></i>
                        </div>
                        <div class="category-name">Futebol</div>
                        <div class="category-amount" id="cat-futebol">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="apostas">
                        <div class="category-icon" style="color: #f59e0b;">
                            <i class="fas fa-dice"></i>
                        </div>
                        <div class="category-name">Apostas</div>
                        <div class="category-amount" id="cat-apostas">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="cabelo">
                        <div class="category-icon" style="color: #8b5cf6;">
                            <i class="fas fa-cut"></i>
                        </div>
                        <div class="category-name">Cabelo</div>
                        <div class="category-amount" id="cat-cabelo">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="luz">
                        <div class="category-icon" style="color: #f59e0b;">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div class="category-name">Luz</div>
                        <div class="category-amount" id="cat-luz">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="faculdade">
                        <div class="category-icon" style="color: #3b82f6;">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="category-name">Faculdade</div>
                        <div class="category-amount" id="cat-faculdade">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="cartao">
                        <div class="category-icon" style="color: #ef4444;">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="category-name">Cart√£o de Cr√©dito</div>
                        <div class="category-amount" id="cat-cartao">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="nautico">
                        <div class="category-icon" style="color: #06b6d4;">
                            <i class="fas fa-anchor"></i>
                        </div>
                        <div class="category-name">S√≥cio N√°utico</div>
                        <div class="category-amount" id="cat-nautico">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="namorada">
                        <div class="category-icon" style="color: #ec4899;">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="category-name">Namorada</div>
                        <div class="category-amount" id="cat-namorada">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="passeio">
                        <div class="category-icon" style="color: #10b981;">
                            <i class="fas fa-walking"></i>
                        </div>
                        <div class="category-name">Passeio</div>
                        <div class="category-amount" id="cat-passeio">R$ 0,00</div>
                    </div>

                    <div class="category-card" data-category="habilitacao">
                        <div class="category-icon" style="color: #6366f1;">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="category-name">Habilita√ß√£o</div>
                        <div class="category-amount" id="cat-habilitacao">R$ 0,00</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Savings Tab -->
        <div class="tab-content" id="savings">
            <div class="savings-goal">
                <h3 class="section-title">
                    <i class="fas fa-piggy-bank"></i> Meta de Economia Mensal
                </h3>
                <div class="goal-input">
                    <input type="number" id="savings-goal-input" placeholder="Valor da meta (R$)" step="0.01" min="0.01">
                    <button class="btn btn-primary" onclick="setSavingsGoal()">
                        <i class="fas fa-target"></i> Definir Meta
                    </button>
                </div>
                
                <div class="goal-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="savings-progress"></div>
                    </div>
                    <div class="progress-text">
                        <span id="savings-current">R$ 0,00</span>
                        <span id="savings-target">Meta: R$ 0,00</span>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Adicionar √† Economia</label>
                        <input type="number" id="savings-add" placeholder="Valor (R$)" step="0.01" min="0.01">
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-success btn-block" onclick="addToSavings()">
                            <i class="fas fa-plus"></i> Adicionar
                        </button>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="section-title">
                    <i class="fas fa-chart-line"></i> Hist√≥rico de Economia
                </h3>
                <div class="chart" id="savings-chart">
                    <canvas id="savingsCanvas"></canvas>
                </div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div class="tab-content" id="calendar">
            <div class="calendar-section">
                <div class="calendar-header">
                    <h3 class="section-title">
                        <i class="fas fa-calendar-alt"></i> Calend√°rio de D√≠vidas
                    </h3>
                    <div class="calendar-nav">
                        <button class="calendar-btn" onclick="previousYear()">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span id="current-year">2024</span>
                        <button class="calendar-btn" onclick="nextYear()">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <div class="calendar-grid" id="calendar-grid">
                    <!-- Months will be generated by JavaScript -->
                </div>

                <div class="form-section" style="margin-top: 30px;">
                    <h3 class="section-title">
                        <i class="fas fa-edit"></i> Marcar M√™s com D√≠vida
                    </h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>M√™s</label>
                            <select id="debt-month">
                                <option value="0">Janeiro</option>
                                <option value="1">Fevereiro</option>
                                <option value="2">Mar√ßo</option>
                                <option value="3">Abril</option>
                                <option value="4">Maio</option>
                                <option value="5">Junho</option>
                                <option value="6">Julho</option>
                                <option value="7">Agosto</option>
                                <option value="8">Setembro</option>
                                <option value="9">Outubro</option>
                                <option value="10">Novembro</option>
                                <option value="11">Dezembro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ano</label>
                            <input type="number" id="debt-year" min="2020" max="2030" value="2024">
                        </div>
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button class="btn btn-danger btn-block" onclick="markDebtMonth()">
                                <i class="fas fa-exclamation-triangle"></i> Marcar como D√≠vida
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data Management
        class FinancialManager {
            constructor() {
                this.transactions = JSON.parse(localStorage.getItem('transactions')) || [];
                this.savingsGoal = parseFloat(localStorage.getItem('savingsGoal')) || 0;
                this.savingsAmount = parseFloat(localStorage.getItem('savingsAmount')) || 0;
                this.debtMonths = JSON.parse(localStorage.getItem('debtMonths')) || [];
                this.currentYear = parseInt(localStorage.getItem('currentYear')) || new Date().getFullYear();
                this.savingsHistory = JSON.parse(localStorage.getItem('savingsHistory')) || [];
            }

            saveTransactions() {
                localStorage.setItem('transactions', JSON.stringify(this.transactions));
            }

            saveSavingsGoal() {
                localStorage.setItem('savingsGoal', this.savingsGoal.toString());
            }

            saveSavingsAmount() {
                localStorage.setItem('savingsAmount', this.savingsAmount.toString());
            }

            saveDebtMonths() {
                localStorage.setItem('debtMonths', JSON.stringify(this.debtMonths));
            }

            saveCurrentYear() {
                localStorage.setItem('currentYear', this.currentYear.toString());
            }

            saveSavingsHistory() {
                localStorage.setItem('savingsHistory', JSON.stringify(this.savingsHistory));
            }

            addTransaction(transaction) {
                this.transactions.push({
                    ...transaction,
                    id: Date.now(),
                    date: transaction.date || new Date().toISOString().split('T')[0]
                });
                this.saveTransactions();
            }

            deleteTransaction(id) {
                this.transactions = this.transactions.filter(t => t.id !== id);
                this.saveTransactions();
            }

            getCategoryTotals() {
                const totals = {};
                const categories = ['salario', 'futebol', 'apostas', 'cabelo', 'luz', 'faculdade', 'cartao', 'nautico', 'namorada', 'passeio', 'habilitacao'];
                
                categories.forEach(cat => {
                    totals[cat] = this.transactions
                        .filter(t => t.category === cat)
                        .reduce((sum, t) => sum + t.amount, 0);
                });
                
                return totals;
            }

            getMonthlyData() {
                const currentMonth = new Date().getMonth();
                const currentYear = new Date().getFullYear();
                
                const monthlyTransactions = this.transactions.filter(t => {
                    const date = new Date(t.date);
                    return date.getMonth() === currentMonth && date.getFullYear() === currentYear;
                });

                const income = monthlyTransactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);

                const expenses = monthlyTransactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);

                return { income, expenses, balance: income - expenses };
            }

            addToSavings(amount) {
                this.savingsAmount += amount;
                this.saveSavingsAmount();
                
                // Add to history
                this.savingsHistory.push({
                    date: new Date().toISOString(),
                    amount: amount,
                    total: this.savingsAmount
                });
                this.saveSavingsHistory();
            }

            markDebtMonth(month, year) {
                const key = `${year}-${month}`;
                if (!this.debtMonths.includes(key)) {
                    this.debtMonths.push(key);
                    this.saveDebtMonths();
                }
            }

            unmarkDebtMonth(month, year) {
                const key = `${year}-${month}`;
                this.debtMonths = this.debtMonths.filter(m => m !== key);
                this.saveDebtMonths();
            }

            isDebtMonth(month, year) {
                const key = `${year}-${month}`;
                return this.debtMonths.includes(key);
            }
        }

        // Initialize Manager
        const manager = new FinancialManager();

        // UI Management
        class UIManager {
            constructor() {
                this.currentTab = 'dashboard';
                this.initializeEventListeners();
                this.updateDashboard();
                this.renderTransactions();
                this.updateCategories();
                this.updateSavings();
                this.renderCalendar();
                this.initializeCharts();
            }

            initializeEventListeners() {
                // Tab Navigation
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchTab(e.target.closest('.nav-btn').dataset.tab);
                    });
                });

                // Forms
                document.getElementById('quick-transaction-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleQuickTransaction();
                });

                document.getElementById('transaction-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleTransaction();
                });

                // Set today's date as default
                document.getElementById('date').valueAsDate = new Date();
            }

            switchTab(tabName) {
                // Update active tab
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // Update content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabName).classList.add('active');

                this.currentTab = tabName;

                // Refresh data when switching tabs
                if (tabName === 'dashboard') {
                    this.updateDashboard();
                    this.initializeCharts();
                } else if (tabName === 'transactions') {
                    this.renderTransactions();
                } else if (tabName === 'categories') {
                    this.updateCategories();
                } else if (tabName === 'savings') {
                    this.updateSavings();
                    this.initializeSavingsChart();
                } else if (tabName === 'calendar') {
                    this.renderCalendar();
                }
            }

            handleQuickTransaction() {
                const description = document.getElementById('quick-description').value;
                const amount = parseFloat(document.getElementById('quick-amount').value);
                const type = document.getElementById('quick-type').value;
                const category = document.getElementById('quick-category').value;

                manager.addTransaction({
                    description,
                    amount,
                    type,
                    category
                });

                document.getElementById('quick-transaction-form').reset();
                this.updateDashboard();
                this.showNotification('Transa√ß√£o adicionada com sucesso!', 'success');
            }

            handleTransaction() {
                const description = document.getElementById('description').value;
                const amount = parseFloat(document.getElementById('amount').value);
                const date = document.getElementById('date').value;
                const type = document.getElementById('type').value;
                const category = document.getElementById('category').value;

                manager.addTransaction({
                    description,
                    amount,
                    date,
                    type,
                    category
                });

                document.getElementById('transaction-form').reset();
                document.getElementById('date').valueAsDate = new Date();
                this.renderTransactions();
                this.updateDashboard();
                this.showNotification('Transa√ß√£o salva com sucesso!', 'success');
            }

            updateDashboard() {
                const monthlyData = manager.getMonthlyData();
                
                // Update dashboard cards
                document.getElementById('salary-value').textContent = this.formatCurrency(monthlyData.income);
                document.getElementById('expenses-value').textContent = this.formatCurrency(monthlyData.expenses);
                document.getElementById('balance-value').textContent = this.formatCurrency(monthlyData.balance);
                document.getElementById('savings-value').textContent = this.formatCurrency(manager.savingsGoal);
            }

            renderTransactions() {
                const container = document.getElementById('transactions-container');
                
                if (manager.transactions.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>Nenhuma transa√ß√£o registrada</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = manager.transactions
                    .sort((a, b) => new Date(b.date) - new Date(a.date))
                    .map(t => `
                        <div class="transaction-item">
                            <div class="transaction-info">
                                <div class="transaction-icon" style="background: ${t.type === 'income' ? 'rgba(16, 185, 129, 0.1)' : 'rgba(239, 68, 68, 0.1)'}; color: ${t.type === 'income' ? 'var(--success)' : 'var(--danger)'};">
                                    <i class="fas ${this.getCategoryIcon(t.category)}"></i>
                                </div>
                                <div class="transaction-details">
                                    <h4>${t.description}</h4>
                                    <p>${this.getCategoryName(t.category)} ‚Ä¢ ${this.formatDate(t.date)}</p>
                                </div>
                            </div>
                            <div class="transaction-value ${t.type}">
                                ${t.type === 'income' ? '+' : '-'} ${this.formatCurrency(t.amount)}
                            </div>
                            <div class="transaction-actions">
                                <button class="action-btn delete-btn" onclick="uiManager.deleteTransaction(${t.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `).join('');
            }

            updateCategories() {
                const totals = manager.getCategoryTotals();
                
                Object.keys(totals).forEach(category => {
                    const element = document.getElementById(`cat-${category}`);
                    if (element) {
                        element.textContent = this.formatCurrency(totals[category]);
                    }
                });

                // Add click handlers
                document.querySelectorAll('.category-card').forEach(card => {
                    card.addEventListener('click', () => {
                        document.querySelectorAll('.category-card').forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                    });
                });
            }

            updateSavings() {
                const progress = manager.savingsGoal > 0 ? (manager.savingsAmount / manager.savingsGoal) * 100 : 0;
                
                document.getElementById('savings-progress').style.width = `${Math.min(progress, 100)}%`;
                document.getElementById('savings-current').textContent = this.formatCurrency(manager.savingsAmount);
                document.getElementById('savings-target').textContent = `Meta: ${this.formatCurrency(manager.savingsGoal)}`;
                document.getElementById('savings-goal-input').value = manager.savingsGoal || '';
            }

            renderCalendar() {
                const grid = document.getElementById('calendar-grid');
                const months = ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
                
                document.getElementById('current-year').textContent = manager.currentYear;
                
                grid.innerHTML = months.map((month, index) => {
                    const isDebt = manager.isDebtMonth(index, manager.currentYear);
                    return `
                        <div class="month-card ${isDebt ? 'debt' : ''}" onclick="uiManager.toggleDebtMonth(${index})">
                            <div class="month-name">${month}</div>
                            <div class="month-status">${isDebt ? 'Com d√≠vida' : 'Em dia'}</div>
                        </div>
                    `;
                }).join('');
            }

            toggleDebtMonth(month) {
                if (manager.isDebtMonth(month, manager.currentYear)) {
                    manager.unmarkDebtMonth(month, manager.currentYear);
                } else {
                    manager.markDebtMonth(month, manager.currentYear);
                }
                this.renderCalendar();
            }

            initializeCharts() {
                this.initializeEvolutionChart();
                this.initializeDistributionChart();
            }

            initializeEvolutionChart() {
                const canvas = document.getElementById('evolutionCanvas');
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                // Get last 6 months data
                const months = [];
                const incomeData = [];
                const expenseData = [];
                
                for (let i = 5; i >= 0; i--) {
                    const date = new Date();
                    date.setMonth(date.getMonth() - i);
                    const monthKey = `${date.getFullYear()}-${date.getMonth()}`;
                    
                    const monthTransactions = manager.transactions.filter(t => {
                        const tDate = new Date(t.date);
                        return tDate.getMonth() === date.getMonth() && 
                               tDate.getFullYear() === date.getFullYear();
                    });
                    
                    const income = monthTransactions
                        .filter(t => t.type === 'income')
                        .reduce((sum, t) => sum + t.amount, 0);
                        
                    const expenses = monthTransactions
                        .filter(t => t.type === 'expense')
                        .reduce((sum, t) => sum + t.amount, 0);
                    
                    months.push(date.toLocaleDateString('pt-BR', { month: 'short' }));
                    incomeData.push(income);
                    expenseData.push(expenses);
                }
                
                // Draw chart
                const maxValue = Math.max(...incomeData, ...expenseData, 1);
                const chartHeight = canvas.height - 60;
                const chartWidth = canvas.width - 60;
                const barWidth = chartWidth / (months.length * 2 + 1);
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw bars
                incomeData.forEach((value, index) => {
                    const height = (value / maxValue) * chartHeight;
                    const x = 30 + index * barWidth * 2;
                    const y = chartHeight - height + 30;
                    
                    ctx.fillStyle = '#10b981';
                    ctx.fillRect(x, y, barWidth * 0.8, height);
                    
                    // Value label
                    ctx.fillStyle = '#1f2937';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(this.formatCurrency(value), x + barWidth * 0.4, y - 5);
                });
                
                expenseData.forEach((value, index) => {
                    const height = (value / maxValue) * chartHeight;
                    const x = 30 + index * barWidth * 2 + barWidth;
                    const y = chartHeight - height + 30;
                    
                    ctx.fillStyle = '#ef4444';
                    ctx.fillRect(x, y, barWidth * 0.8, height);
                    
                    // Value label
                    ctx.fillStyle = '#1f2937';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(this.formatCurrency(value), x + barWidth * 0.4, y - 5);
                });
                
                // Draw month labels
                months.forEach((month, index) => {
                    const x = 30 + index * barWidth * 2 + barWidth;
                    ctx.fillStyle = '#1f2937';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(month, x, chartHeight + 50);
                });
                
                // Legend
                ctx.fillStyle = '#10b981';
                ctx.fillRect(30, 10, 15, 15);
                ctx.fillStyle = '#1f2937';
                ctx.font = '12px Arial';
                ctx.textAlign = 'left';
                ctx.fillText('Receitas', 50, 22);
                
                ctx.fillStyle = '#ef4444';
                ctx.fillRect(120, 10, 15, 15);
                ctx.fillStyle = '#1f2937';
                ctx.fillText('Despesas', 140, 22);
            }

            initializeDistributionChart() {
                const canvas = document.getElementById('distributionCanvas');
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                const totals = manager.getCategoryTotals();
                const expenseCategories = ['futebol', 'apostas', 'cabelo', 'luz', 'faculdade', 'cartao', 'nautico', 'namorada', 'passeio', 'habilitacao'];
                const total = expenseCategories.reduce((sum, cat) => sum + totals[cat], 0);
                
                if (total === 0) {
                    ctx.fillStyle = '#6b7280';
                    ctx.font = '16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Sem dados para exibir', canvas.width / 2, canvas.height / 2);
                    return;
                }
                
                // Colors for categories
                const colors = {
                    futebol: '#3b82f6',
                    apostas: '#f59e0b',
                    cabelo: '#8b5cf6',
                    luz: '#f59e0b',
                    faculdade: '#3b82f6',
                    cartao: '#ef4444',
                    nautico: '#06b6d4',
                    namorada: '#ec4899',
                    passeio: '#10b981',
                    habilitacao: '#6366f1'
                };
                
                // Draw pie chart
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const radius = 80;
                
                let currentAngle = -Math.PI / 2;
                
                expenseCategories.forEach(category => {
                    const value = totals[category];
                    if (value === 0) return;
                    
                    const sliceAngle = (value / total) * 2 * Math.PI;
                    
                    // Draw slice
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                    ctx.closePath();
                    ctx.fillStyle = colors[category] || '#6b7280';
                    ctx.fill();
                    
                    // Draw label
                    const labelAngle = currentAngle + sliceAngle / 2;
                    const labelX = centerX + Math.cos(labelAngle) * (radius + 30);
                    const labelY = centerY + Math.sin(labelAngle) * (radius + 30);
                    
                    ctx.fillStyle = '#1f2937';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(this.getCategoryName(category), labelX, labelY);
                    ctx.fillText(`${((value / total) * 100).toFixed(1)}%`, labelX, labelY + 15);
                    
                    currentAngle += sliceAngle;
                });
            }

            initializeSavingsChart() {
                const canvas = document.getElementById('savingsCanvas');
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
                
                if (manager.savingsHistory.length === 0) {
                    ctx.fillStyle = '#6b7280';
                    ctx.font = '16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Sem hist√≥rico de economia', canvas.width / 2, canvas.height / 2);
                    return;
                }
                
                // Draw line chart
                const chartHeight = canvas.height - 60;
                const chartWidth = canvas.width - 60;
                const maxValue = Math.max(...manager.savingsHistory.map(h => h.total), 1);
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw axes
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(30, 30);
                ctx.lineTo(30, chartHeight + 30);
                ctx.lineTo(chartWidth + 30, chartHeight + 30);
                ctx.stroke();
                
                // Draw line
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                manager.savingsHistory.forEach((point, index) => {
                    const x = 30 + (index / (manager.savingsHistory.length - 1)) * chartWidth;
                    const y = chartHeight + 30 - (point.total / maxValue) * chartHeight;
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    // Draw point
                    ctx.fillStyle = '#10b981';
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // Draw value label
                    ctx.fillStyle = '#1f2937';
                    ctx.font = '10px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(this.formatCurrency(point.total), x, y - 10);
                });
                
                ctx.stroke();
            }

            deleteTransaction(id) {
                if (confirm('Tem certeza que deseja excluir esta transa√ß√£o?')) {
                    manager.deleteTransaction(id);
                    this.renderTransactions();
                    this.updateDashboard();
                    this.showNotification('Transa√ß√£o exclu√≠da com sucesso!', 'success');
                }
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }

            formatCurrency(value) {
                return new Intl.NumberFormat('pt-BR', {
                    style: 'currency',
                    currency: 'BRL'
                }).format(value);
            }

            formatDate(dateString) {
                return new Date(dateString).toLocaleDateString('pt-BR');
            }

            getCategoryIcon(category) {
                const icons = {
                    salario: 'fa-money-bill-wave',
                    futebol: 'fa-futbol',
                    apostas: 'fa-dice',
                    cabelo: 'fa-cut',
                    luz: 'fa-lightbulb',
                    faculdade: 'fa-graduation-cap',
                    cartao: 'fa-credit-card',
                    nautico: 'fa-anchor',
                    namorada: 'fa-heart',
                    passeio: 'fa-walking',
                    habilitacao: 'fa-car'
                };
                return icons[category] || 'fa-tag';
            }

            getCategoryName(category) {
                const names = {
                    salario: 'Sal√°rio',
                    futebol: 'Futebol',
                    apostas: 'Apostas',
                    cabelo: 'Cabelo',
                    luz: 'Luz',
                    faculdade: 'Faculdade',
                    cartao: 'Cart√£o de Cr√©dito',
                    nautico: 'S√≥cio N√°utico',
                    namorada: 'Namorada',
                    passeio: 'Passeio',
                    habilitacao: 'Habilita√ß√£o'
                };
                return names[category] || category;
            }
        }

        // Global functions
        function setSavingsGoal() {
            const input = document.getElementById('savings-goal-input');
            const value = parseFloat(input.value);
            
            if (value && value > 0) {
                manager.savingsGoal = value;
                manager.saveSavingsGoal();
                uiManager.updateSavings();
                uiManager.showNotification('Meta de economia definida com sucesso!', 'success');
                input.value = '';
            }
        }

        function addToSavings() {
            const input = document.getElementById('savings-add');
            const value = parseFloat(input.value);
            
            if (value && value > 0) {
                manager.addToSavings(value);
                uiManager.updateSavings();
                uiManager.showNotification(`R$ ${value.toFixed(2)} adicionado √† economia!`, 'success');
                input.value = '';
            }
        }

        function markDebtMonth() {
            const month = parseInt(document.getElementById('debt-month').value);
            const year = parseInt(document.getElementById('debt-year').value);
            
            manager.markDebtMonth(month, year);
            uiManager.renderCalendar();
            uiManager.showNotification('M√™s marcado como d√≠vida!', 'success');
        }

        function previousYear() {
            manager.currentYear--;
            manager.saveCurrentYear();
            uiManager.renderCalendar();
        }

        function nextYear() {
            manager.currentYear++;
            manager.saveCurrentYear();
            uiManager.renderCalendar();
        }

        // Initialize UI Manager
        const uiManager = new UIManager();

        // Add resize handler for charts
        window.addEventListener('resize', () => {
            if (uiManager.currentTab === 'dashboard') {
                uiManager.initializeCharts();
            } else if (uiManager.currentTab === 'savings') {
                uiManager.initializeSavingsChart();
            }
        });
    </script>
</body>
</html>